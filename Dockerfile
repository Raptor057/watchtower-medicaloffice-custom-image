FROM containrrr/watchtower:latest

# Inyectamos las variables en tiempo de build
ARG SMTP_USER
ARG SMTP_PASS

ENV WATCHTOWER_NOTIFICATION_EMAIL_SERVER_USER=$SMTP_USER
ENV WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PASSWORD=$SMTP_PASS
ENV WATCHTOWER_POLL_INTERVAL=300
ENV WATCHTOWER_CLEANUP=true
ENV WATCHTOWER_INCLUDE_STOPPED=true
ENV WATCHTOWER_NOTIFICATIONS=email
ENV WATCHTOWER_NOTIFICATION_EMAIL_FROM=$SMTP_USER
ENV WATCHTOWER_NOTIFICATION_EMAIL_SERVER=smtp.gmail.com
ENV WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PORT=587
ENV WATCHTOWER_NOTIFICATION_EMAIL_DELAY=2
ENV WATCHTOWER_NOTIFICATIONS_LEVEL=info
